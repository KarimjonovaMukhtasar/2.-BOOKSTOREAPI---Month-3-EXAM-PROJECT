<!DOCTYPE html>
<html>
<head>
  <title>Books</title>
</head>
<body>
  <h1>All Books</h1>
  <form method="GET" action="/books">
    <input type="text" name="search" placeholder="Search..." value="<%= search %>">
    <select name="limit">
      <option value="5" <%= limit == 5 ? 'selected' : '' %>>5</option>
      <option value="10" <%= limit == 10 ? 'selected' : '' %>>10</option>
      <option value="20" <%= limit == 20 ? 'selected' : '' %>>20</option>
    </select>
    <button type="submit">Search</button>
  </form>

  <ul>
    <% books.forEach(book => { %>
      <li>
        <strong><%= book.title %></strong> by <%= book.author %>
        <a href="/books/edit/<%= book.id %>">Edit</a>
        <form action="/books/delete/<%= book.id %>" method="POST" style="display:inline">
          <button type="submit">Delete</button>
        </form>
      </li>
    <% }) %>
  </ul>
  <div>
    <% for(let i=1; i<=totalPages; i++) { %>
      <% if(i === page) { %>
        <strong><%= i %></strong>
      <% } else { %>
        <a href="/books?page=<%= i %>&search=<%= search %>&limit=<%= limit %>"><%= i %></a>
      <% } %>
    <% } %>
  </div>
</body>
</html>
